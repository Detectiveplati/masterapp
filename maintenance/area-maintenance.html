<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Report Area Issue | Central Kitchen</title>
    <style>
        :root {
            --accent:   #c0392b;
            --accent-2: #d35400;
            --ink:      #121316;
            --muted:    #5b5b5b;
            --card:     #ffffff;
            --border:   rgba(18,19,22,0.10);
            --shadow:   rgba(0,0,0,0.08);
            --success:  #27ae60;
            --bg:       #f6f4ef;
        }

        * { box-sizing: border-box; margin: 0; padding: 0; }

        body {
            font-family: 'Segoe UI', system-ui, sans-serif;
            background: var(--bg);
            color: var(--ink);
            min-height: 100vh;
        }

        /* â”€â”€ Lang toggle â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .lang-bar {
            position: fixed;
            top: 12px;
            right: 12px;
            z-index: 100;
            display: flex;
            background: rgba(255,255,255,0.92);
            border: 1px solid var(--border);
            border-radius: 20px;
            overflow: hidden;
            box-shadow: 0 2px 10px rgba(0,0,0,0.12);
            backdrop-filter: blur(6px);
        }

        .lang-btn {
            padding: 6px 14px;
            font-size: 0.8rem;
            font-weight: 700;
            border: none;
            background: transparent;
            cursor: pointer;
            color: var(--muted);
            transition: all 0.15s;
        }

        .lang-btn.active {
            background: var(--accent);
            color: white;
            border-radius: 20px;
        }

        /* â”€â”€ Header â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        header {
            background: linear-gradient(135deg, #1a252f, #2c3e50);
            color: white;
            padding: 20px 20px 16px;
            text-align: center;
        }

        .logo {
            width: 56px;
            height: 56px;
            border-radius: 12px;
            margin: 0 auto 10px;
            display: block;
            box-shadow: 0 4px 14px rgba(0,0,0,0.3);
        }

        header h1 { font-size: 1.25rem; font-weight: 800; }
        header p  { font-size: 0.83rem; opacity: 0.72; margin-top: 4px; }

        /* â”€â”€ Main â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        main {
            max-width: 560px;
            margin: 0 auto;
            padding: 24px 16px 60px;
        }

        /* Pre-selected area banner */
        .area-banner {
            display: none;
            background: linear-gradient(90deg, #fff7ed, #fef3e2);
            border: 1px solid #fed7aa;
            border-left: 4px solid var(--accent-2);
            border-radius: 10px;
            padding: 11px 14px;
            margin-bottom: 18px;
            font-size: 0.88rem;
            font-weight: 700;
            color: var(--ink);
            align-items: center;
            gap: 8px;
        }

        .area-banner.visible { display: flex; }

        /* â”€â”€ Form card â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .form-card {
            background: var(--card);
            border-radius: 16px;
            border: 1px solid var(--border);
            box-shadow: 0 8px 24px var(--shadow);
            padding: 24px 20px 28px;
        }

        .section-label {
            font-size: 0.75rem;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 0.8px;
            color: var(--muted);
            margin-bottom: 12px;
            margin-top: 22px;
            padding-bottom: 6px;
            border-bottom: 1px solid var(--border);
        }

        .section-label:first-child { margin-top: 0; }

        .field { margin-bottom: 16px; }

        label {
            display: block;
            font-size: 0.85rem;
            font-weight: 600;
            color: var(--ink);
            margin-bottom: 6px;
        }

        label .req { color: var(--accent); margin-left: 2px; }

        input[type="text"],
        input[type="tel"],
        select,
        textarea {
            width: 100%;
            padding: 12px 14px;
            border: 1.5px solid var(--border);
            border-radius: 10px;
            font-size: 0.95rem;
            font-family: inherit;
            color: var(--ink);
            background: #fafafa;
            -webkit-appearance: none;
            appearance: none;
            transition: border-color 0.15s, box-shadow 0.15s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--accent);
            background: #fff;
            box-shadow: 0 0 0 3px rgba(192,57,43,0.10);
        }

        textarea { resize: vertical; min-height: 110px; line-height: 1.5; }

        /* Submit */
        .btn-submit {
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, var(--accent), #e74c3c);
            color: white;
            border: none;
            border-radius: 12px;
            font-size: 1rem;
            font-weight: 700;
            cursor: pointer;
            margin-top: 24px;
            transition: transform 0.15s, box-shadow 0.15s;
            box-shadow: 0 4px 14px rgba(192,57,43,0.25);
            letter-spacing: 0.3px;
        }

        .btn-submit:hover   { transform: translateY(-2px); box-shadow: 0 8px 20px rgba(192,57,43,0.3); }
        .btn-submit:active  { transform: none; }
        .btn-submit:disabled { opacity: 0.6; cursor: not-allowed; transform: none; }

        /* Validation */
        .field-error { font-size: 0.78rem; color: var(--accent); margin-top: 4px; display: none; }
        .field.has-error input,
        .field.has-error select,
        .field.has-error textarea { border-color: var(--accent); }
        .field.has-error .field-error { display: block; }

        /* â”€â”€ Success â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        #successScreen {
            display: none;
            text-align: center;
            padding: 40px 20px;
        }

        .success-icon  { font-size: 4rem; margin-bottom: 16px; }
        .success-title { font-size: 1.4rem; font-weight: 800; color: var(--success); margin-bottom: 8px; }
        .success-sub   { font-size: 0.92rem; color: var(--muted); margin-bottom: 6px; }

        .issue-ref {
            display: inline-block;
            background: #f0fdf4;
            border: 1px solid #bbf7d0;
            color: #15803d;
            border-radius: 8px;
            padding: 4px 14px;
            font-weight: 700;
            font-size: 0.9rem;
            margin: 10px 0 24px;
        }

        .btn-again {
            display: inline-block;
            padding: 14px 28px;
            background: linear-gradient(135deg, var(--accent-2), #e67e22);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 0.95rem;
            font-weight: 700;
            cursor: pointer;
            box-shadow: 0 4px 12px rgba(0,0,0,0.12);
        }

        /* â”€â”€ Photo upload â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ */
        .photo-upload-label {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 14px 16px;
            border: 1.5px dashed var(--border);
            border-radius: 10px;
            background: #fafaf8;
            cursor: pointer;
            font-size: 0.9rem;
            color: var(--muted);
            font-weight: 500;
            transition: border-color 0.15s, background 0.15s;
        }
        .photo-upload-label:hover {
            border-color: var(--accent);
            background: #fff8f6;
            color: var(--accent);
        }
        .photo-upload-label input { display: none; }
        .photo-preview {
            margin-top: 10px;
            display: none;
        }
        .photo-preview img {
            max-width: 100%;
            max-height: 200px;
            border-radius: 8px;
            border: 1px solid var(--border);
            object-fit: cover;
        }
        .photo-name {
            font-size: 0.8rem;
            color: var(--muted);
            margin-top: 5px;
        }

    </style>
</head>
<body>

<!-- Language toggle -->
<div class="lang-bar">
    <button class="lang-btn active" id="btnEN" onclick="setLang('en')">EN</button>
    <button class="lang-btn"        id="btnZH" onclick="setLang('zh')">ä¸­æ–‡</button>
</div>

<header>
    <img src="assets/Chilli-Api-Logo-170px.png" alt="Logo" class="logo">
    <h1 id="hdrTitle">ğŸ—ï¸ Report Area Issue</h1>
    <p id="hdrSub">Central Kitchen â€” Facility Issue Reporting</p>
</header>

<main>
    <div class="area-banner" id="areaBanner">
        <span>ğŸ“</span>
        <span id="areaBannerText"></span>
    </div>

    <!-- FORM -->
    <div class="form-card" id="formCard">
        <form id="issueForm" novalidate>

            <div class="section-label" id="lblSecLocation">ğŸ“ LOCATION</div>

            <div class="field" id="fieldArea">
                <label for="area" id="lblArea">Area <span class="req">*</span></label>
                <select id="area" name="area">
                    <option value="" id="optAreaDefault">â€” Select area â€”</option>
                    <option value="Combi Oven Area">Combi Oven Area</option>
                    <option value="Deep Frying Area">Deep Frying Area</option>
                    <option value="Stir Frying Area">Stir Frying Area</option>
                    <option value="Packing Area">Packing Area</option>
                    <option value="Salad Room">Salad Room</option>
                    <option value="Fruit Room">Fruit Room</option>
                    <option value="Cold Room">Cold Room</option>
                    <option value="Pan Fry Area">Pan Fry Area</option>
                </select>
                <div class="field-error" id="errArea">Please select an area.</div>
            </div>

            <div class="field">
                <label for="specificLocation" id="lblSpecific">Specific Location <span style="font-weight:400;color:var(--muted)" id="lblOptional">(optional)</span></label>
                <input type="text" id="specificLocation" name="specificLocation" placeholder="e.g. Near sink #2, left corner" id="phSpecific">
            </div>

            <div class="section-label" id="lblSecDetails">ğŸ“‹ ISSUE DETAILS</div>

            <div class="field" id="fieldIssue">
                <label for="issue" id="lblIssue">Issue <span class="req">*</span></label>
                <textarea id="issue" name="issue" placeholder="Describe the issue â€” what happened, where exactly..."></textarea>
                <div class="field-error" id="errIssue">Please describe the issue.</div>
            </div>

            <div class="section-label" id="lblSecReporter">ğŸ‘¤ REPORTER</div>

            <div class="field" id="fieldReportedBy">
                <label for="reportedBy" id="lblReportedBy">Your Name <span class="req">*</span></label>
                <input type="text" id="reportedBy" name="reportedBy" placeholder="Enter your name">
                <div class="field-error" id="errReportedBy">Please enter your name.</div>
            </div>

            <div class="section-label">ğŸ“· PHOTO <span style="font-weight:400;text-transform:none;letter-spacing:0;font-size:0.78rem;color:var(--muted)">(optional)</span></div>

            <div class="field">
                <label class="photo-upload-label" for="issuePhoto">
                    <span>ğŸ“¸</span>
                    <span id="photoLabelText">Tap to attach a photo</span>
                    <input type="file" id="issuePhoto" name="image" accept="image/*" capture="environment" onchange="handlePhotoSelect(this)">
                </label>
                <div class="photo-preview" id="photoPreview">
                    <img id="photoPreviewImg" src="" alt="Preview">
                    <div class="photo-name" id="photoFileName"></div>
                </div>
            </div>

            <button type="submit" class="btn-submit" id="submitBtn">ğŸ“¤ Submit Issue Report</button>
        </form>
    </div>

    <!-- SUCCESS -->
    <div id="successScreen">
        <div class="success-icon">âœ…</div>
        <div class="success-title" id="successTitle">Issue Reported!</div>
        <div class="success-sub" id="successSub1">Thank you. Your report has been logged.</div>
        <div class="issue-ref" id="issueRef">â€”</div>
        <div class="success-sub" id="successSub2" style="margin-bottom:24px;">The maintenance team will review and respond.</div>
        <button class="btn-again" id="btnAgain" onclick="resetForm()">Report Another Issue</button>
    </div>
</main>

<script src="js/api.js"></script>
<script>
// â”€â”€ Translations â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
const T = {
    en: {
        hdrTitle:     'ğŸ—ï¸ Report Area Issue',
        hdrSub:       'Central Kitchen â€” Facility Issue Reporting',
        lblSecLocation: 'ğŸ“ LOCATION',
        lblArea:      'Area',
        optAreaDefault: 'â€” Select area â€”',
        lblSpecific:  'Specific Location',
        lblOptional:  '(optional)',
        lblSecDetails:'ğŸ“‹ ISSUE DETAILS',
        lblIssue:     'Issue',
        phIssue:      'Describe the issue â€” what happened, where exactlyâ€¦',
        lblSecReporter:'ğŸ‘¤ REPORTER',
        lblReportedBy:'Your Name',
        phReportedBy: 'Enter your name',
        submitBtn:    'ğŸ“¤ Submit Issue Report',
        errArea:      'Please select an area.',
        errIssue:     'Please describe the issue.',
        errReportedBy:'Please enter your name.',
        successTitle: 'Issue Reported!',
        successSub1:  'Thank you. Your report has been logged.',
        successSub2:  'The maintenance team will review and respond.',
        btnAgain:     'Report Another Issue',
        bannerPrefix: 'Area:',
        submitting:   'Submittingâ€¦',
        submitFailed: 'Failed to submit: '
    },
    zh: {
        hdrTitle:     'ğŸ—ï¸ åŒºåŸŸé—®é¢˜æŠ¥å‘Š',
        hdrSub:       'ä¸­å¤®å¨æˆ¿ â€” è®¾æ–½é—®é¢˜æŠ¥å‘Š',
        lblSecLocation: 'ğŸ“ ä½ç½®',
        lblArea:      'åŒºåŸŸ',
        optAreaDefault: 'â€” è¯·é€‰æ‹©åŒºåŸŸ â€”',
        lblSpecific:  'å…·ä½“ä½ç½®',
        lblOptional:  'ï¼ˆå¯é€‰ï¼‰',
        lblSecDetails:'ğŸ“‹ é—®é¢˜è¯¦æƒ…',
        lblIssue:     'é—®é¢˜æè¿°',
        phIssue:      'è¯·æè¿°é—®é¢˜ â€” å‘ç”Ÿäº†ä»€ä¹ˆã€å…·ä½“ä½ç½®â€¦',
        lblSecReporter:'ğŸ‘¤ æŠ¥å‘Šäºº',
        lblReportedBy:'æ‚¨çš„å§“å',
        phReportedBy: 'è¯·è¾“å…¥æ‚¨çš„å§“å',
        submitBtn:    'ğŸ“¤ æäº¤é—®é¢˜æŠ¥å‘Š',
        errArea:      'è¯·é€‰æ‹©åŒºåŸŸã€‚',
        errIssue:     'è¯·æè¿°é—®é¢˜ã€‚',
        errReportedBy:'è¯·è¾“å…¥æ‚¨çš„å§“åã€‚',
        successTitle: 'æŠ¥å‘ŠæˆåŠŸï¼',
        successSub1:  'æ„Ÿè°¢æ‚¨ã€‚æ‚¨çš„é—®é¢˜æŠ¥å‘Šå·²è®°å½•ã€‚',
        successSub2:  'ç»´ä¿®å›¢é˜Ÿå°†å®¡æ ¸å¹¶å¤„ç†ã€‚',
        btnAgain:     'æŠ¥å‘Šå¦ä¸€ä¸ªé—®é¢˜',
        bannerPrefix: 'åŒºåŸŸï¼š',
        submitting:   'æäº¤ä¸­â€¦',
        submitFailed: 'æäº¤å¤±è´¥ï¼š'
    }
};

// Area names in Chinese
const AREA_ZH = {
    'Combi Oven Area':  'ä¸‡èƒ½çƒ¤ç‚‰åŒº',
    'Deep Frying Area': 'ç‚¸é”…åŒº',
    'Stir Frying Area': 'ç‚’é”…åŒº',
    'Packing Area':     'åŒ…è£…åŒº',
    'Salad Room':       'æ²™å¾‹æˆ¿',
    'Fruit Room':       'æ°´æœæˆ¿',
    'Cold Room':        'å†·è—å®¤',
    'Pan Fry Area':     'ç…é”…åŒº'
};

let lang = 'en';

function setLang(l) {
    lang = l;
    document.getElementById('btnEN').classList.toggle('active', l === 'en');
    document.getElementById('btnZH').classList.toggle('active', l === 'zh');

    const t = T[l];
    const textIds = ['hdrTitle','hdrSub','lblSecLocation','lblSpecific','lblOptional',
        'lblSecDetails','lblSecReporter',
        'optAreaDefault',
        'errArea','errIssue','errReportedBy',
        'successTitle','successSub1','successSub2','btnAgain'
    ];
    textIds.forEach(id => {
        const el = document.getElementById(id);
        if (el && t[id] !== undefined) el.textContent = t[id];
    });

    // Labels with required star
    document.getElementById('lblArea').innerHTML       = t.lblArea + ' <span class="req">*</span>';
    document.getElementById('lblIssue').innerHTML      = t.lblIssue + ' <span class="req">*</span>';
    document.getElementById('lblReportedBy').innerHTML = t.lblReportedBy + ' <span class="req">*</span>';

    // Placeholders
    document.getElementById('issue').placeholder      = t.phIssue;
    document.getElementById('reportedBy').placeholder = t.phReportedBy;
    document.getElementById('submitBtn').textContent  = t.submitBtn;

    // Update area banner
    const sel = document.getElementById('area');
    if (sel.value) {
        const dispName = l === 'zh' ? (AREA_ZH[sel.value] || sel.value) : sel.value;
        document.getElementById('areaBannerText').textContent = t.bannerPrefix + ' ' + dispName;
    }
}

// â”€â”€ Init: read ?area= param â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
window.addEventListener('DOMContentLoaded', () => {
    const browserLang = (navigator.language || navigator.userLanguage || 'en').toLowerCase();
    if (browserLang.startsWith('zh')) setLang('zh'); else setLang('en');

    const params    = new URLSearchParams(window.location.search);
    const areaParam = params.get('area');
    if (areaParam) {
        const sel = document.getElementById('area');
        for (const opt of sel.options) {
            if (opt.value.toLowerCase() === areaParam.toLowerCase() || opt.value === areaParam) {
                opt.selected = true;
                break;
            }
        }
        if (!sel.value) {
            const opt = new Option(areaParam, areaParam, true, true);
            sel.appendChild(opt);
        }
        const t = T[lang];
        const dispName = lang === 'zh' ? (AREA_ZH[sel.value] || sel.value) : sel.value;
        document.getElementById('areaBannerText').textContent = t.bannerPrefix + ' ' + dispName;
        document.getElementById('areaBanner').classList.add('visible');
    }
});

// â”€â”€ Validation â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function validate() {
    const t = T[lang];
    const checks = [
        { fieldId: 'fieldArea',       id: 'area',      errId: 'errArea' },
        { fieldId: 'fieldIssue',      id: 'issue',     errId: 'errIssue' },
        { fieldId: 'fieldReportedBy', id: 'reportedBy',errId: 'errReportedBy' }
    ];
    let ok = true;
    checks.forEach(c => {
        const el   = document.getElementById(c.id);
        const wrap = document.getElementById(c.fieldId);
        const err  = document.getElementById(c.errId);
        if (!el.value.trim()) {
            wrap.classList.add('has-error');
            if (err && t[c.errId]) err.textContent = t[c.errId];
            ok = false;
        } else {
            wrap.classList.remove('has-error');
        }
    });
    return ok;
}

// â”€â”€ Submit â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
document.getElementById('issueForm').addEventListener('submit', async (e) => {
    e.preventDefault();
    if (!validate()) return;

    const btn = document.getElementById('submitBtn');
    btn.disabled = true;
    btn.textContent = T[lang].submitting;

    const issueText = document.getElementById('issue').value.trim();
    const titleText = issueText.split(/[.\n]/)[0].trim().slice(0, 80) || issueText.slice(0, 80);

    const fd = new FormData();
    fd.append('area',             document.getElementById('area').value.trim());
    fd.append('category',         'Other');
    fd.append('title',            titleText);
    fd.append('description',      issueText);
    fd.append('priority',         'Medium');
    fd.append('specificLocation', document.getElementById('specificLocation').value.trim());
    fd.append('reportedBy',       document.getElementById('reportedBy').value.trim());
    const photoFile = document.getElementById('issuePhoto').files[0];
    if (photoFile) fd.append('image', photoFile);

    try {
        const controller = new AbortController();
        const timeout = setTimeout(() => controller.abort(), 30000); // 30s timeout
        const res = await fetch(`${API_BASE}/issues`, {
            method: 'POST',
            body: fd,
            signal: controller.signal
        });
        clearTimeout(timeout);
        if (!res.ok) { const e = await res.json(); throw new Error(e.message || 'Server error'); }
        const newIssue = await res.json();

        document.getElementById('formCard').style.display      = 'none';
        document.getElementById('successScreen').style.display = 'block';
        document.getElementById('issueRef').textContent        = `Reference: ${newIssue.issueId || 'Logged'}`;

        setLang(lang);

    } catch (err) {
        btn.disabled = false;
        btn.textContent = T[lang].submitBtn;
        const msg = err.name === 'AbortError' ? 'Request timed out. Please try again.' : err.message;
        alert(T[lang].submitFailed + msg);
    }
});

// â”€â”€ Photo preview â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function handlePhotoSelect(input) {
    const file = input.files[0];
    const preview  = document.getElementById('photoPreview');
    const previewImg = document.getElementById('photoPreviewImg');
    const nameEl   = document.getElementById('photoFileName');
    const labelEl  = document.getElementById('photoLabelText');
    if (file) {
        previewImg.src = URL.createObjectURL(file);
        nameEl.textContent = file.name;
        preview.style.display = 'block';
        labelEl.textContent = 'âœ… Photo selected â€” tap to change';
    } else {
        preview.style.display = 'none';
        labelEl.textContent = 'Tap to attach a photo';
    }
}

// â”€â”€ Reset â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
function resetForm() {
    document.getElementById('issueForm').reset();
    document.getElementById('photoPreview').style.display = 'none';
    document.getElementById('photoLabelText').textContent = 'Tap to attach a photo';
    document.getElementById('formCard').style.display      = 'block';
    document.getElementById('successScreen').style.display = 'none';
    document.getElementById('submitBtn').disabled          = false;
    document.getElementById('submitBtn').textContent       = T[lang].submitBtn;
    document.querySelectorAll('.has-error').forEach(el => el.classList.remove('has-error'));
}
</script>
</body>
</html>